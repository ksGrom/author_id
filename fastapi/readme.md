## Определение авторства текста

Микросервис на FastAPI для обучения и применения моделей для классификации текстов по авторству.

## FastAPI (устарело, необходимо обновить!)

Код микросервиса содержится в `main.py`. На текущий момент реализован только
один метод: `/predict` [**в последней версии более 20 методов**]. На вход принимается файл с одним или несколькими текстами,
в ответе содержится список из результатов классификации. 
Поддерживаются два расширения для входного файла: `.txt` и `.csv`. Входной файл
с расширением `txt` рассматривается программой как один текст. Если на вход подается
`csv`-таблица (набор текстов), то в ней должен быть столбец, озаглавленный как `text`.
Файл должен иметь кодировку UTF-8. Если файл невалидный, сервис ответит кодом 422 
(проверяются расширение, кодировка и, в случае csv-файла, наличие столбца `text`).
Документация в формате OpenAPI доступна по URL `/docs`.


## Установка (устарело, необходимо обновить!)
*Ссылка на docker-образ: https://hub.docker.com/r/ksgrom/author_id*

Скачивание образа:
```bash
docker pull ksgrom/author_id
```

Пример создания и запуска в фоновом режиме контейнера из образа:
```bash
docker run --rm -d -p 8988:8000 --name author_id author_id
```

После выполнения этой команды с этого же ПК можно открыть в браузере
страницу с документацией в формате OpenAPI: `http://localhost:8988/docs` —
и протестировать приложение.

## Тестирование
Основные функции приложения реализованы в модулях `dataset_utils.py` и 
`tfidf_utils.py`, большая часть из них покрыта тестами; тесты находятся в папке tests.

Чтобы запустить тесты, достаточно дополнительным процессом открыть в контейнере терминал
и выполнить команду (из рабочей директории `/app`):
```bash
python3 -m pytest --cov . tests
```
